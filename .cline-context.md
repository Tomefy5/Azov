# ğŸ“„ `.cline-context.md` - AZOV PROJECT

CrÃ©ez ce fichier Ã  la racine du projet: `azov-platform/.cline-context.md`


# AZOV - AI Context for Cline

## ğŸ¯ PROJECT OVERVIEW

**Project Name**: AZOV  
**Tagline**: Decentralized Identity Platform on Walrus + Sui  
**Goal**: Complete MVP in 48 hours  
**Hackathon**: Walrus Haulout (Nov 6-16, 2025)  
**Tracks**: "Provably Authentic" + "AI Ã— Data"  
**Target Market**: Madagascar + Africa + Global  

---

## ğŸ—ï¸ TECH STACK

### Frontend
- Next.js 14 (App Router) + TypeScript
- TailwindCSS + shadcn/ui
- Zustand (state) + React Hook Form + Zod
- @mysten/sui.js (wallet)
- Deployed: Vercel

### Backend
- Express.js + TypeScript + Node.js 20
- Prisma (ORM) + PostgreSQL (Supabase)
- Redis cache + Bull queues
- JWT + bcryptjs
- Deployed: Railway.app

### Blockchain
- **Sui Move** contracts (3: CertificateRegistry, ReputationOracle, PaymentSplitter)
- **Walrus**: Decentralized storage (Red Stuff encoding)
- Testnet only

### AI/ML
- **Ollama** (local, free): OCR, text extraction, document analysis
- **Replicate API**: Deepfake detection, face comparison
- **Custom ML**: Fraud detection, anomaly scoring

---

## ğŸ“ FOLDER STRUCTURE

```
azov-platform/
â”œâ”€â”€ frontend/src/
â”‚   â”œâ”€â”€ app/               # Next.js 14 pages
â”‚   â”œâ”€â”€ components/        # React components
â”‚   â”œâ”€â”€ services/          # API clients
â”‚   â”œâ”€â”€ stores/            # Zustand state
â”‚   â”œâ”€â”€ hooks/             # Custom hooks
â”‚   â”œâ”€â”€ types/             # TypeScript types
â”‚   â””â”€â”€ lib/               # Utilities
â”‚
â”œâ”€â”€ backend/src/
â”‚   â”œâ”€â”€ services/          # Business logic
â”‚   â”œâ”€â”€ controllers/       # Route handlers
â”‚   â”œâ”€â”€ routes/            # API routes
â”‚   â”œâ”€â”€ middleware/        # Express middleware
â”‚   â”œâ”€â”€ integrations/      # External APIs
â”‚   â”œâ”€â”€ lib/               # Utils
â”‚   â”œâ”€â”€ jobs/              # Background jobs
â”‚   â””â”€â”€ prisma/            # Database
â”‚
â”œâ”€â”€ contracts/sources/     # Sui Move contracts
â””â”€â”€ docs/                  # Documentation
```

---

## ğŸ¯ THE 3 PILLIERS (MVP Features)

### **Pilier 1: IDENTITY** âœ…
- Phone + password registration
- Wallet connection (Sui)
- Biometric capture (selfie + liveness)
- Government ID upload + OCR
- AI verification (deepfake detection)
- Certificate on Sui blockchain
- Storage on Walrus (encrypted)

### **Pilier 2: EMPLOYMENT** âœ…
- Add employment records
- Company wallet + employer verification
- Employment certificate generation
- Multi-validator signing
- Certificate storage (Sui + Walrus)

### **Pilier 3: BACKGROUND** âœ…
- Criminal record lookup
- Civil disputes tracking
- Privacy settings (visible to employers/lenders/gov)
- Visibility controls
- Revocation system

---

## ğŸ“Š CORE CONCEPTS

### Reputation Score (0-100)
- **Legal** (25%): No criminal record, no disputes
- **Financial** (20%): Payment history, credit score
- **Professional** (15%): Job stability, employment history
- **Social** (5%): Community rating
- **Verification** (30%): How much data verified

### Trust Levels
- **Platinum** (95-100): All verified, excellent
- **Gold** (85-94): Most verified, minor issues
- **Silver** (70-84): Partially verified
- **Bronze** (50-69): Limited verification
- **New** (<50): Just registered

### Data Flow
1. User uploads doc â†’ Ollama extracts text
2. Biometric captured â†’ Replicate checks for deepfake
3. Data encrypted & stored on Walrus
4. Certificate created on Sui blockchain
5. Reputation score calculated
6. Result displayed on dashboard

---

## ğŸ’» CODING STANDARDS

### TypeScript (STRICT)
```
// âœ… DO THIS:
async function verifyIdentity(userId: string): Promise<VerificationResult> {
  try {
    if (!userId) throw new Error('User ID required');
    const user = await db.findUser(userId);
    return { success: true, userId };
  } catch (error) {
    logger.error('Verification failed:', error);
    throw new CustomError('Failed to verify');
  }
}

// âŒ NEVER:
const verify = async (id) => {
  return await db.findUser(id);  // No types, no error handling
};
```

### File Naming
- Components: `IdentityForm.tsx` (PascalCase)
- Services: `identity.service.ts` (kebab-case)
- Utils: `validators.ts` (kebab-case)
- Types: `user.ts` (kebab-case)

### Key Rules
âœ… **Always**:
- Use TypeScript strictly (no `any`)
- Add try/catch to async functions
- Validate inputs with Zod
- Add JSDoc comments
- Use environment variables
- Handle errors explicitly

âŒ **Never**:
- Hardcode API keys
- Skip error handling
- Write without type safety
- Log sensitive data
- Trust user input

---

## ğŸ”— IMPORTANT API ENDPOINTS

```
Auth:
POST /api/auth/register          # Create account
POST /api/auth/login             # Login
POST /api/auth/verify-phone      # Verify SMS code

Identity:
POST /api/identity/upload        # Upload doc
POST /api/identity/biometric     # Submit selfie
GET /api/identity/:userId        # Get profile

Employment:
POST /api/employment/add         # Add record
GET /api/employment/:userId      # Get history
POST /api/employment/:id/verify  # Employer verify

Reputation:
GET /api/reputation/:userId      # Get score
GET /api/reputation/:userId/breakdown  # Get details

Verification:
POST /api/verification/request   # Request data
GET /api/verification/report     # Get report
```

---

## ğŸš€ CURRENT PHASE

**Phase**: 1 (Infrastructure Setup)  
**Hours**: 0-16h  
**Status**: Backend structure + database schema + smart contracts

**Next**: Frontend auth â†’ Pilier 1 (Identity) â†’ Pilier 2 (Employment) â†’ Pilier 3 (Background) â†’ Dashboard

---

## ğŸ“¦ KEY DEPENDENCIES

Frontend: next, react, typescript, tailwindcss, zustand, react-hook-form, zod, axios, @mysten/sui.js

Backend: express, typescript, @prisma/client, jsonwebtoken, bcryptjs, redis, bull, zod, @mysten/sui.js

---

## ğŸ“ GUIDELINES FOR CLINE

1. **Generate production-ready code** - Not drafts, actual deployable code
2. **Type everything** - No TypeScript `any` types
3. **Error handling required** - Every async function has try/catch
4. **Input validation** - Always use Zod before processing
5. **Add comments** - JSDoc for functions, inline for complex logic
6. **Security first** - No hardcoded secrets, validate inputs
7. **Follow patterns** - Routes â†’ Controllers â†’ Services â†’ Repositories
8. **Test critical paths** - Write tests for core logic
9. **Optimize performance** - Consider DB queries, caching
10. **Focus on working MVP** - Speed > Perfection (but not broken)

---

## ğŸ” SECURITY CHECKLIST

- [ ] Input validation (Zod schemas)
- [ ] Password hashing (bcryptjs)
- [ ] JWT token verification
- [ ] CORS configuration
- [ ] Rate limiting middleware
- [ ] SQL injection prevention
- [ ] XSS protection
- [ ] CSRF tokens
- [ ] Sensitive data encryption
- [ ] No secrets in code

---

## âœ… BEFORE STARTING

- [ ] Read this file completely
- [ ] Understand the 3 pilliers
- [ ] Know the folder structure
- [ ] Follow coding standards
- [ ] Use Zod for validation
- [ ] Add error handling
- [ ] Add TypeScript types
- [ ] Write JSDoc comments

---

**Status**: Ready to develop ğŸš€  
**Last Updated**: Nov 7, 2025

***

## ğŸ¯ COMMENT L'UTILISER

### 1ï¸âƒ£ CrÃ©er le fichier
```bash
cd azov-platform
# Copiez tout le contenu ci-dessus dans:
# .cline-context.md
```

### 2ï¸âƒ£ Ouvrir Cline dans VSCode
```
Cmd/Ctrl + Shift + P â†’ Cline: Open
```

### 3ï¸âƒ£ Envoyer un prompt
```
"Use the context from .cline-context.md to set up the backend structure"
```

### 4ï¸âƒ£ Cline va:
- âœ… Lire automatiquement `.cline-context.md`
- âœ… Comprendre l'architecture AZOV
- âœ… Respecter les conventions de code
- âœ… GÃ©nÃ©rer du code production-ready
- âœ… Ajouter les types TypeScript
- âœ… GÃ©rer les erreurs correctement

